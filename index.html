<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>mtechwin print setting</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-4bw+/aepP/YC94hEpVNVgiZdgIC5+VKNBQNGCHeKRQN+PtmoHDEXuppvnDJzQIu9" crossorigin="anonymous">
  <script type="text/javascript">

    function calculation() {

      let printUnit = 0;
      let calPreNum, sumRem;
      let sumSet = 0;
      let color = [], preNum = [], setNum = [], remNum = [];

      printUnit = document.getElementById("inputprintUnit").value || 0;

      if (printUnit == 0) {
        alert("There is no Print Unit value. Please enter a value.");
        return;
      }

      let colors = document.getElementsByClassName("input-number");
      
      for (let i = 0; i < colors.length; i++) {
        color.push(colors[i].value || 0);

        calPreNum = 0;
        sumRem = 0;
        
        if (color[i] > 0) {
          // calculate pre-input
          for (let k = i-1; k >= 0; k--) {
              
              if (setNum[k] > 0 || remNum[k] > 0) {

                calPreNum = printUnit - (Number(remNum[k]) + sumRem);

                if (calPreNum > color[i]) {
                  calPreNum = color[i];
                }
                break;
              }
              else {
                sumRem += Number(preNum[k]);
              }
          }

          preNum.push(calPreNum);
          setNum.push(Math.floor((color[i] - calPreNum)/printUnit));
          remNum.push((color[i] - calPreNum) % printUnit);
        }
        else {
          preNum.push(0);
          setNum.push(0);
          remNum.push(0);
        }
          
        document.getElementsByClassName("preNum")[i].textContent = preNum[i];
        document.getElementsByClassName("setNum")[i].textContent = setNum[i];
        document.getElementsByClassName("remNum")[i].textContent = remNum[i];

        sumSet += Number(setNum[i]) + (remNum[i] > 0 ? 1 : 0);
      }

      document.getElementById("resultSetCount").textContent = sumSet;
    }
  </script> 
</head>
<body>
  <!-- Header-->
  <header class="bg-dark py-1">
    <div class="container px-4 px-lg-5 my-1">
        <div class="text-center text-white">
            <h1 class="display-4 fw-bolder">Printer Setting</h1>
            <p class="lead fw-normal text-white-50 mb-0">mtechwin</p>
        </div>
    </div>
  </header>

  <!-- Section-->
  <section class="py-5">  
    <div class="container text-center">
      <div class="row align-items-center">
        <div class="col">
          <label for="inputprintUnit" class="form-label">Print Unit</label>
          <input type="number" class="form-control-lg w-25" id="inputprintUnit" placeholder="Input Print Unit" value="56" onKeyup="this.value=this.value.replace(/[^0-9]/g,'');">
          <div>--------------------------</div>
        </div>
      </div>
      <div class="row align-items-center">
        <div class="col card h-100">
          <label for="colorinput1" class="form-label">color 1</label>
          <input type="color" class="form-control form-control-color" id="colorinput1" value="#FCFDF9" title="Choose your color">
          <input type="number" class="form-control form-control-lg input-number" min="0" id="input1" onKeyup="this.value=this.value.replace(/[^0-9]/g,'');if(window.event.keyCode==13){calculation();}">
          <div class="col">
            <div>1 Pre -----> <span class="preNum"></span></div>
            <div>1 Set -----> <span class="setNum"></span></div>
            <div>1 Remain > <span class="remNum"></span></div>
          </div>        
        </div>
        <div class="col card h-100">
          <label for="colorinput2" class="form-label">color 2</label>
          <input type="color" class="form-control form-control-color" id="colorinput2" value="#D7DADB" title="Choose your color">
          <input type="number" class="form-control form-control-lg input-number" min="0" id="input2" onKeyup="this.value=this.value.replace(/[^0-9]/g,'');if(window.event.keyCode==13){calculation();}">
          <div class="col">
            <div>1 Pre -----> <span class="preNum"></span></div>
            <div>1 Set -----> <span class="setNum"></span></div>
            <div>1 Remain > <span class="remNum"></span></div>
          </div>        
        </div>
        <div class="col card h-100">
          <label for="colorinput3" class="form-label">color 3</label>
          <input type="color" class="form-control form-control-color" id="colorinput3" value="#DEC6BB" title="Choose your color">
          <input type="number" class="form-control form-control-lg input-number" min="0" id="input3" onKeyup="this.value=this.value.replace(/[^0-9]/g,'');if(window.event.keyCode==13){calculation();}">
          <div class="col">
            <div>1 Pre -----> <span class="preNum"></span></div>
            <div>1 Set -----> <span class="setNum"></span></div>
            <div>1 Remain > <span class="remNum"></span></div>
          </div>        
        </div>
        <div class="col card h-100">
          <label for="colorinput4" class="form-label">color 4</label>
          <input type="color" class="form-control form-control-color" id="colorinput4" value="#000000" title="Choose your color">
          <input type="number" class="form-control form-control-lg input-number" min="0" id="input4" onKeyup="this.value=this.value.replace(/[^0-9]/g,'');if(window.event.keyCode==13){calculation();}">
          <div class="col">
            <div>1 Pre -----> <span class="preNum"></span></div>
            <div>1 Set -----> <span class="setNum"></span></div>
            <div>1 Remain > <span class="remNum"></span></div>
          </div>        
        </div>
        <div class="col card h-100">
          <label for="colorinput5" class="form-label">color 5</label>
          <input type="color" class="form-control form-control-color" id="colorinput5" value="#000000" title="Choose your color">
          <input type="number" class="form-control form-control-lg input-number" min="0" id="input5" onKeyup="this.value=this.value.replace(/[^0-9]/g,'');if(window.event.keyCode==13){calculation();}">
          <div class="col">
            <div>1 Pre -----> <span class="preNum"></span></div>
            <div>1 Set -----> <span class="setNum"></span></div>
            <div>1 Remain > <span class="remNum"></span></div>
          </div>        
        </div>
      </div>
    </div>
  </section>
  <div class="row align-items-center">
    <div class="col text-center">
      <button id="calBtn" class="btn btn-primary mb-3" onclick="calculation()">Calculate</button>
      <div class="text-center">Count of Sets : <span id="resultSetCount">0</span></div>
      <div>--------------------------</div>
    </div>
  </div>

  <!-- Footer-->
  <footer class="py-1 bg-dark">
    <div class="container"><p class="m-0 text-center text-white">Copyright &copy; mtechwin 2023</p></div>
  </footer>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-HwwvtgBNo3bZJJLYd8oVXjrBZt8cqVSpeBNS5n7C8IVInixGAoxmnlMuBnhbgrkm" crossorigin="anonymous"></script>
</body>
</html>